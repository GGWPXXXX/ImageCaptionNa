<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <script type="text/javascript">
      function previewFile() {
        const preview = document.querySelector("img");
        const file = document.querySelector("input[type=file]").files[0];
        const reader = new FileReader();
        reader.addEventListener(
          "load",
          function () {
            preview.src = reader.result; // show image in <img> tag
            uploadFile(file);
          },
          false
        );
        if (file) {
          reader.readAsDataURL(file);
        }
      }

      function uploadFile(file) {
        var formData = new FormData();
        formData.append("file", file);
        fetch("/upload", {
          method: "POST",
          body: formData,
        })
          .then((response) => {
            console.log(response);
          })
          .catch((error) => {
            console.error(error);
          });
      }
    </script>
    <div class="grid grid-rows-2 gap-4 p-4">
      <form
        action="http://127.0.0.1:8000/caption"
        method="post"
        enctype="multipart/form-data"
      >
        <div class="flex flex-col gap-4 justify-center items-center">
          <h1 class="text-3xl font-bold">Image Captioning ðŸ“¸</h1>
          <input
            type="file"
            name="file"
            accept="image/*"
            id="imageInput"
            required
            onchange="previewFile()"
          /><br />
          <img src="" height="200" alt="Image preview..." />
          <button
            type="submit"
            class="bg-blue-500 text-white px-2 rounded-sm w-24 py-2 hover:bg-blue-300 duration-500"
          >
            Submit
          </button>
        </div>
      </form>
    </div>
  </body>
</html>
